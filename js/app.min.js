var app=angular.module("dictionaryApp",["angularUtils.directives.dirPagination"]);
function wordsController(a,c){a.currentPage=1;a.pageSize=10;a.displaySelectedWord=!0;c.get("script/dictionary.php?type=json&query=api_hits").success(function(b){a.apiHitsCount=b.api_hits});c.get(window.location.href+"script/get_bookmarks.php").then(function(b){0!=b.data.length?(a.bookmarkCount=b.data.length,a.bookmarks=b.data,a.bookmarkFlag=!1):(a.bookmarkCount=0,a.bookmarks=[{word:"No bookmarks found!"}],a.bookmarkFlag=!0)},function(b){a.bookmarkCount=0;a.bookmarks=[{word:"No data found!"}];a.bookmarkFlag=
!0;console.log("Failed to get data from database!")});c.get("script/dictionary.php?type=json&query=A").success(function(b){a.alphabets="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");a.words=b;a.getWords=function(b){c.get("script/dictionary.php?type=json&query="+b).success(function(b){a.currentPage=1;a.displaySelectedWord=!0;a.words=b})}});a.showSelectedWord=function(b){a.audioCheck=!0;var d=b.word.trim().replace(/[^\w\s]/gi," ").split(" "),e=[],f;for(f in d)e.push(d[f].toLowerCase());d="http://vaas.acapela-group.com/Services/UrlMaker.json?cl_login=EVAL_VAAS&cl_app=EVAL_8101870&cl_pwd=kktgikd5&req_voice=sharon22k&req_text="+
e.join("+");c.get(d).success(function(b){"OK"===b.res&&(jQuery("#audio").attr("src",b.snd_url),a.audioCheck=!1)});a.selectedWord=b.word;a.selectedWordDescription=b.description;a.displaySelectedWord=!1};a.saveBookmark=function(){c({method:"post",url:window.location.href+"script/add_bookmark.php",data:{word:a.selectedWord},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){location.reload()},function(a){console.log("Failed to save data in database!")})};a.emptyBookmarks=
function(){c({method:"post",url:window.location.href+"script/delete_bookmarks.php",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){location.reload()},function(a){console.log("Failed to delete data on database!")})}}app.controller("wordsController",["$scope","$http",wordsController]);